<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.3.xsd">

    <changeSet id="fin-eug-153" logicalFilePath="path-independent" author="eugene">
        <addColumn schemaName="apps" tableName="fin_req_lines">
            <column name="item_num" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="unit_price" type="number" defaultValue="0" >
                <constraints nullable="false"/>
            </column>

        </addColumn>
    </changeSet>

    <changeSet id="fin-eug-154" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_req_line_interface</comment>
        <createTable tableName="fin_req_line_interface" schemaName="apps" remarks="Строки заявок на закупку - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="req_num" type="number" remarks="Номер заявки">
                <constraints nullable="false"/>
            </column>

            <column name="pos_num" type="number" remarks="Позиция заявки">
                <constraints nullable="false"/>
            </column>

            <column name="pos_name" type="varchar(300)" remarks="Наименование позиции">
                <constraints nullable="false"/>
            </column>

            <column name="item_num" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="unit" type="varchar(100)" remarks="Единица измерения">
                <constraints nullable="false"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="false"/>
            </column>

            <column name="unit_price" type="number" defaultValue="0" >
                <constraints nullable="false"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Валюта">
                <constraints nullable="false"/>
            </column>

            <column name="company_code" type="varchar(4)" remarks="Балансовая единица">
                <constraints nullable="false"/>
            </column>

            <column name="expected_date" type="date" remarks="Дата потребности">
                <constraints nullable="false"/>
            </column>

            <column name="is_deleted" type="varchar2(1)" remarks="Флаг - удалено">
                <constraints nullable="true"/>
            </column>

            <column name="is_unlocked" type="varchar2(1)" remarks="Флаг - деблокировано/утверждено">
                <constraints nullable="true"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-155" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_req_line_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_req_line_interface"
                schemaName="apps"
                tableName="fin_req_line_interface"/>
    </changeSet>

    <changeSet id="fin-eug-156" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_req_line_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_req_line_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-157" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_debt_interface</comment>
        <createTable tableName="fin_debt_interface" schemaName="apps" remarks="Задолженности по договорам - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_type" type="varchar(1)" remarks="Тип делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="bp_num" type="varchar(30)" remarks="Номер делового партнера в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="contract_num" type="varchar(20)" remarks="Номер договора в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="ext_contract_num" type="varchar(30)" remarks="Номер договора с бумажного носителя">
                <constraints nullable="true"/>
            </column>

            <column name="debt_type" type="varchar(1)" remarks="Тип задолженности">
                <constraints nullable="false"/>
            </column>

            <column name="accounting_date" type="date" remarks="Дата задолженности">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Сумма задолженности в валюте документа">
                <constraints nullable="false"/>
            </column>

            <column name="base_amount" type="number" remarks="Сумма задолженности в валюте системы">
                <constraints nullable="true"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Валюта документа">
                <constraints nullable="false"/>
            </column>

            <column name="exchange_rate" type="number" remarks="Курс валюты">
                <constraints nullable="true"/>
            </column>

            <column name="doc_num" type="varchar(30)" remarks="Номер документа">
                <constraints nullable="false"/>
            </column>

            <column name="doc_date" type="date" remarks="Дата документа">
                <constraints nullable="false"/>
            </column>

            <column name="company_code" type="varchar(4)" remarks="Код балансовой единицы">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-158" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_debt_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_debt_interface"
                schemaName="apps"
                tableName="fin_debt_interface"/>
    </changeSet>

    <changeSet id="fin-eug-159" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_debt_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_debt_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-160" logicalFilePath="path-independent" author="eugene">
        <comment>Adding column to table table: fin_req_line_interface</comment>
        <addColumn schemaName="apps" tableName="fin_req_line_interface">
            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="fin-eug-161" logicalFilePath="path-independent" author="eugene">
        <comment>Adding column to table table: fin_debt_interface</comment>
        <addColumn schemaName="apps" tableName="fin_debt_interface">
            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>


    <changeSet id="fin-eug-162" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_invoice_status_interface</comment>
        <createTable tableName="fin_invoice_status_interface" schemaName="apps" remarks="Статусы счетов-фактур в системе ЭСФ - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_type" type="varchar(1)" remarks="Тип делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="doc_num" type="varchar(30)" remarks="Номер документа">
                <constraints nullable="false"/>
            </column>

            <column name="doc_date" type="date" remarks="Дата документа">
                <constraints nullable="false"/>
            </column>

            <column name="esf_doc_num" type="varchar(30)" remarks="Номер документа в системе ЭСФ">
                <constraints nullable="false"/>
            </column>

            <column name="esf_doc_date" type="date" remarks="Дата документа в системе ЭСФ">
                <constraints nullable="false"/>
            </column>

            <column name="esf_status" type="varchar(20)" remarks="Статус документа в системе ЭСФ">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-163" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_invoice_status_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_invoice_status_interface"
                schemaName="apps"
                tableName="fin_invoice_status_interface"/>
    </changeSet>

    <changeSet id="fin-eug-164" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_invoice_status_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_invoice_status_interface_s"
                startValue="1"/>
    </changeSet>


    <changeSet id="fin-eug-165" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_invoice_interface</comment>
        <createTable tableName="fin_invoice_interface" schemaName="apps" remarks="Счетов-фактуры  - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_type" type="varchar(1)" remarks="Тип делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="bp_num" type="varchar(30)" remarks="Номер делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="doc_num" type="varchar(30)" remarks="Номер документа">
                <constraints nullable="false"/>
            </column>

            <column name="ext_doc_num" type="varchar(30)" remarks="Номер документа с бумажного носителя">
                <constraints nullable="true"/>
            </column>

            <column name="doc_date" type="date" remarks="Дата документа">
                <constraints nullable="false"/>
            </column>

            <column name="contract_num" type="varchar(20)" remarks="Номер договора в ERP">
                <constraints nullable="false"/>
            </column>

            <column name="ext_contract_num" type="varchar(30)" remarks="Номер договора с бумажного носителя">
                <constraints nullable="true"/>
            </column>

            <column name="company_code" type="varchar(4)" remarks="Код балансовой единицы">
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" remarks="Сумма счета-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="tax" type="number" remarks="Сумма налога">
                <constraints nullable="true"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Код валюты">
                <constraints nullable="false"/>
            </column>

            <column name="exchange_rate" type="number" remarks="Сумма валюты">
                <constraints nullable="true"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-166" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_invoice_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_invoice_interface"
                schemaName="apps"
                tableName="fin_invoice_interface"/>
    </changeSet>

    <changeSet id="fin-eug-167" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_invoice_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_invoice_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-168" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_invoice_line_interface</comment>
        <createTable tableName="fin_invoice_line_interface" schemaName="apps" remarks="Строки счетов-фактур  - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="invoice_interface_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="pos_num" type="number" remarks="Позиция счета-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="pos_name" type="varchar(300)" remarks="Наименование позиции">
                <constraints nullable="false"/>
            </column>

            <column name="unit" type="varchar(100)" remarks="Единица измерения">
                <constraints nullable="true"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="true"/>
            </column>

            <column name="amount" type="number" remarks="Сумма счета-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-169" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_invoice_line_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_invoice_line_interface"
                schemaName="apps"
                tableName="fin_invoice_line_interface"/>
    </changeSet>

    <changeSet id="fin-eug-170" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_invoice_line_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_invoice_line_interface_s"
                startValue="1"/>
    </changeSet>



    <changeSet id="fin-eug-171" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: dict_bp_interface</comment>
        <createTable tableName="dict_bp_interface" schemaName="apps" remarks="Деловые партнеры  - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_num" type="varchar(30)" remarks="Номер делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="search_group" type="varchar(30)" remarks="Группа">
                <constraints nullable="false"/>
            </column>

            <column name="search_criteria" type="varchar(20)" remarks="Критерий поиска">
                <constraints nullable="false"/>
            </column>

            <column name="found_date" type="date" remarks="Дата документа">
                <constraints nullable="false"/>
            </column>

            <column name="liq_date" type="date" remarks="Дата ликвидации">
                <constraints nullable="true"/>
            </column>

            <column name="industry" type="varchar(30)" remarks="Отрасль">
                <constraints nullable="true"/>
            </column>

            <column name="tax_number_type" type="varchar(30)" remarks="Тип налогового номера">
                <constraints nullable="false"/>
            </column>

            <column name="tax_number" type="varchar(20)" remarks="Налоговый номер">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-172" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: dict_bp_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_dict_bp_interface"
                schemaName="apps"
                tableName="dict_bp_interface"/>
    </changeSet>

    <changeSet id="fin-eug-173" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: dict_bp_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="dict_bp_interface_s"
                startValue="1"/>
    </changeSet>


    <changeSet id="fin-eug-174" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: dict_bp_interface_tl</comment>
        <createTable tableName="dict_bp_interface_tl" schemaName="apps" remarks="Перевод - деловые партнеры">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_interface_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="name" type="varchar(120)" remarks="Наименование делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="full_name" type="varchar(500)" remarks="Полное наименование делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-175" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: dict_bp_interface_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_dict_bp_interface_tl"
                schemaName="apps"
                tableName="dict_bp_interface_tl"/>
    </changeSet>

    <changeSet id="fin-eug-176" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: dict_bp_interface_tl</comment>
        <addUniqueConstraint
                columnNames="bp_interface_id, lang"
                constraintName="uk_dict_bp_interface_tl_1"
                schemaName="apps"
                tableName="dict_bp_interface_tl"/>
    </changeSet>

    <changeSet id="fin-eug-177" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: dict_bp_interface_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="dict_bp_interface_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-178" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: dict_bp_interface_tl</comment>
        <createIndex indexName="idx_dict_bp_interface_tl_1" schemaName="apps" tableName="dict_bp_interface_tl">
            <column name="bp_interface_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-179" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: dict_bp_interface_tl to dict_bp_interface</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="dict_bp_interface_tl"
                baseColumnNames="bp_interface_id"
                constraintName="fk_dict_bp_interface_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bp_interface"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-180" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: dict_bp_bank_account_interface</comment>
        <createTable tableName="dict_bp_bank_account_interface" schemaName="apps" remarks="Банковские счета деловых партнеров - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_interface_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="country" type="varchar(2)" remarks="Страна">
                <constraints nullable="false"/>
            </column>

            <column name="bik" type="varchar(20)" remarks="БИК">
                <constraints nullable="false"/>
            </column>

            <column name="account" type="varchar(40)" remarks="Банковский счет">
                <constraints nullable="true"/>
            </column>

            <column name="iban" type="varchar(40)" remarks="IBAN">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-181" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: dict_bp_bank_account_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_dict_bp_bank_account_interface"
                schemaName="apps"
                tableName="dict_bp_bank_account_interface"/>
    </changeSet>

    <changeSet id="fin-eug-182" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: dict_bp_bank_account_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="dict_bp_bank_account_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-183" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: dict_bp_interface_tl</comment>
        <createIndex indexName="idx_dict_bp_bank_account_interface_1" schemaName="apps" tableName="dict_bp_bank_account_interface">
            <column name="bp_interface_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-184" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: dict_bp_bank_account_interface to dict_bp_interface</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="dict_bp_bank_account_interface"
                baseColumnNames="bp_interface_id"
                constraintName="fk_dict_bp_bank_account_interface_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bp_interface"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="fin-eug-185" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: dict_bp_relation_interface</comment>
        <createTable tableName="dict_bp_relation_interface" schemaName="apps" remarks="Отношения деловых партнеров - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_interface_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="bp_num" type="varchar(30)" remarks="Номер делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="relation_type" type="varchar(20)" remarks="БИК">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-186" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: dict_bp_relation_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_dict_bp_relation_interface"
                schemaName="apps"
                tableName="dict_bp_relation_interface"/>
    </changeSet>

    <changeSet id="fin-eug-187" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: dict_bp_relation_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="dict_bp_relation_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-188" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: dict_bp_relation_interface</comment>
        <createIndex indexName="idx_dict_bp_relation_interface_1" schemaName="apps" tableName="dict_bp_relation_interface">
            <column name="bp_interface_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-189" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: dict_bp_relation_interface to dict_bp_interface</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="dict_bp_relation_interface"
                baseColumnNames="bp_interface_id"
                constraintName="fk_dict_bp_relation_interface_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bp_interface"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="fin-eug-190" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: dict_bp_address_interface</comment>
        <createTable tableName="dict_bp_address_interface" schemaName="apps" remarks="Адреса - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_interface_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="address_type" type="varchar(30)" remarks="Тип адреса">
                <constraints nullable="false"/>
            </column>

            <column name="country" type="varchar(100)" remarks="Код страны">
                <constraints nullable="false"/>
            </column>

            <column name="region" type="varchar(100)" remarks="Код региона">
                <constraints nullable="false"/>
            </column>

            <column name="house_num" type="varchar(20)" remarks="№ дома">
                <constraints nullable="true"/>
            </column>

            <column name="build_num" type="varchar(20)" remarks="№ строения">
                <constraints nullable="true"/>
            </column>

            <column name="post_code" type="varchar(20)" remarks="Почтовый индекс">
                <constraints nullable="true"/>
            </column>

            <column name="room" type="varchar(20)" remarks="№ кабинета">
                <constraints nullable="true"/>
            </column>

            <column name="area" type="varchar(100)" remarks="Район">
                <constraints nullable="true"/>
            </column>

            <column name="phone_num" type="varchar(20)" remarks="№ телефона">
                <constraints nullable="true"/>
            </column>

            <column name="int_phone_num" type="varchar(20)" remarks="Внутренний №  телефона">
                <constraints nullable="true"/>
            </column>

            <column name="cell_phone_num" type="varchar(20)" remarks="№ мобильного телефона">
                <constraints nullable="true"/>
            </column>

            <column name="fax" type="varchar(20)" remarks="Факс">
                <constraints nullable="true"/>
            </column>

            <column name="email" type="varchar(100)" remarks="Адрес электронной почты">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-191" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: dict_bp_address_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_dict_bp_address_interface"
                schemaName="apps"
                tableName="dict_bp_address_interface"/>
    </changeSet>

    <changeSet id="fin-eug-192" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: dict_bp_address_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="dict_bp_address_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-193" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: dict_bp_address_interface</comment>
        <createIndex indexName="idx_dict_bp_address_interface_1" schemaName="apps" tableName="dict_bp_address_interface">
            <column name="bp_interface_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-194" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: dict_bp_address_interface to dict_bp_interface</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="dict_bp_address_interface"
                baseColumnNames="bp_interface_id"
                constraintName="fk_dict_bp_address_interface_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bp_interface"
                referencedColumnNames="id"
        />
    </changeSet>


    <changeSet id="fin-eug-195" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating table: dict_bp_address_interface_tl</comment>
        <createTable tableName="dict_bp_address_interface_tl" schemaName="apps" remarks="Перевод - адреса деловых партнеров - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_address_interface_id" type="number" remarks="Идентификатор родительской записи">
                <constraints nullable="false"/>
            </column>

            <column name="lang" type="varchar(10)" remarks="язык">
                <constraints nullable="false"/>
            </column>

            <column name="city" type="varchar(100)" remarks="Город">
                <constraints nullable="false"/>
            </column>

            <column name="street" type="varchar(100)" remarks="Улица">
                <constraints nullable="false"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-196" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating primary key for table: dict_bp_address_interface_tl</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_dict_bp_address_interface_tl"
                schemaName="apps"
                tableName="dict_bp_address_interface_tl"/>
    </changeSet>

    <changeSet id="fin-eug-197" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating unique key for table: dict_bp_address_interface_tl</comment>
        <addUniqueConstraint
                columnNames="bp_address_interface_id, lang"
                constraintName="uk_dict_bp_address_interface_tl_1"
                schemaName="apps"
                tableName="dict_bp_address_interface_tl"/>
    </changeSet>

    <changeSet id="fin-eug-198" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating sequence for table: dict_bp_address_interface_tl</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="dict_bp_address_interface_tl_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-199" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>creating index for table: dict_bp_address_interface_tl</comment>
        <createIndex indexName="idx_dict_bp_address_interface_tl_1" schemaName="apps" tableName="dict_bp_address_interface_tl">
            <column name="bp_address_interface_id"  type="number"/>
        </createIndex>
    </changeSet>

    <changeSet id="fin-eug-200" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: dict_bp_address_interface_tl to dict_bp_address_interface</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="dict_bp_address_interface_tl"
                baseColumnNames="bp_address_interface_id"
                constraintName="fk_dict_bp_address_interface_tl_1"
                deferrable="true"
                onDelete="CASCADE"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="dict_bp_address_interface"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-201" logicalFilePath="path-independent" author="eugene">
        <comment>Adding column to table: fin_invoice_interface</comment>
        <addColumn tableName="fin_invoice_interface" schemaName="apps">
            <column name="accounting_date" type="date" remarks="Дата проводки">
                <constraints nullable="true"/>
            </column>

            <column name="turnover_date" type="date" remarks="Дата совершения оборота">
                <constraints nullable="true"/>
            </column>

            <column name="doc_type" type="varchar2(20)" remarks="Тип документа">
                <constraints nullable="true"/>
            </column>

            <column name="src_doc_num" type="varchar2(30)" remarks="Номер исходного документа">
                <constraints nullable="true"/>
            </column>

            <column name="order_num" type="varchar2(30)" remarks="Номер заказа">
                <constraints nullable="true"/>
            </column>

        </addColumn>
    </changeSet>

    <changeSet id="fin-eug-202" logicalFilePath="path-independent" author="eugene">
        <comment>Adding column to table: fin_invoice_line_interface</comment>
        <addColumn tableName="fin_invoice_line_interface" schemaName="apps">
            <column name="item_num" type="varchar2(30)" remarks="Номер основной записи материала">
                <constraints nullable="true"/>
            </column>

            <column name="bp_num" type="varchar2(30)" remarks="Номер основной записи делового партнера">
                <constraints nullable="true"/>
            </column>

            <column name="price" type="number" remarks="Цена за единицу">
                <constraints nullable="true"/>
            </column>

            <column name="tax_rate" type="number" remarks="Ставка налога">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>


    <changeSet id="fin-eug-203" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_invoice_rev_interface</comment>
        <createTable tableName="fin_invoice_rev_interface" schemaName="apps" remarks="Сторнирование счетов-фактур - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_type" type="varchar(1)" remarks="Тип делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="doc_num" type="varchar(30)" remarks="Номер документа">
                <constraints nullable="false"/>
            </column>

            <column name="doc_date" type="date" remarks="Дата документа">
                <constraints nullable="false"/>
            </column>

            <column name="rev_date" type="date" remarks="Дата сторнирования">
                <constraints nullable="true"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-204" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_invoice_rev_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_invoice_rev_interface"
                schemaName="apps"
                tableName="fin_invoice_rev_interface"/>
    </changeSet>

    <changeSet id="fin-eug-205" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_invoice_rev_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_invoice_rev_interface_s"
                startValue="1"/>
    </changeSet>


    <changeSet id="fin-eug-206" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_sale_plan_interface</comment>
        <createTable tableName="fin_sale_plan_interface" schemaName="apps" remarks="Прогнозные данные - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_num" type="varchar(30)" remarks="Номер делового партнера в ERP">
                <constraints nullable="true"/>
            </column>

            <column name="item_num" type="varchar2(30)" remarks="Номер основной записи материала">
                <constraints nullable="false"/>
            </column>

            <column name="version" type="number" >
                <constraints nullable="false"/>
            </column>

            <column name="forecast_type" type="varchar2(1)" remarks="Тип прогноза">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Дата начала периода">
                <constraints nullable="false"/>
            </column>

            <column name="end_date" type="date" remarks="Дата окончания периода">
                <constraints nullable="false"/>
            </column>

            <column name="quantity" type="number" >
                <constraints nullable="false"/>
            </column>

            <column name="amount" type="number" >
                <constraints nullable="false"/>
            </column>

            <column name="currency_code" type="varchar2(3)" remarks="Валюта">
                <constraints nullable="false"/>
            </column>

            <column name="company_code" type="varchar2(4)" remarks="Код балансовой единицы">
                <constraints nullable="false"/>
            </column>

            <column name="channel" type="varchar2(2)" remarks="Канал сбыта">
                <constraints nullable="false"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-207" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_sale_plan_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_sale_plan_interface"
                schemaName="apps"
                tableName="fin_sale_plan_interface"/>
    </changeSet>

    <changeSet id="fin-eug-208" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_sale_plan_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_sale_plan_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-209" logicalFilePath="path-independent" author="eugene">
        <comment>Drop not null constraint for table: fin_req_line_interface</comment>
        <dropNotNullConstraint schemaName="apps" tableName="fin_req_line_interface" columnName="pos_name" />
        <dropNotNullConstraint schemaName="apps" tableName="fin_req_line_interface" columnName="unit" />
        <dropNotNullConstraint schemaName="apps" tableName="fin_req_line_interface" columnName="quantity" />
        <dropNotNullConstraint schemaName="apps" tableName="fin_req_line_interface" columnName="unit_price" />
        <dropNotNullConstraint schemaName="apps" tableName="fin_req_line_interface" columnName="currency_code" />
        <dropNotNullConstraint schemaName="apps" tableName="fin_req_line_interface" columnName="company_code" />
        <dropNotNullConstraint schemaName="apps" tableName="fin_req_line_interface" columnName="expected_date" />
    </changeSet>

    <changeSet id="fin-eug-210" logicalFilePath="path-independent" author="ruslan" context="dev">
        <comment>Add comments to the columns fin_req_line_interface</comment>
        <sql dbms="postgres, oracle" endDelimiter=";" splitStatements="true" stripComments="true">
            comment on column apps.fin_req_line_interface.item_num       is 'Номер основной записи материала';
            comment on column apps.fin_req_line_interface.unit_price     is 'Цена за единицу';
            comment on column apps.fin_sale_plan_interface.version       is 'Версия';
            comment on column apps.fin_sale_plan_interface.quantity      is 'Количество';
            comment on column apps.fin_sale_plan_interface.amount        is 'Сумма';
            comment on column apps.fin_sale_plan_interface.ws_session_id is 'Идентификатор сессии';
        </sql>
    </changeSet>

    <changeSet id="fin-eug-211" logicalFilePath="path-independent" author="eugene">
        <comment>Drop column from table: dict_bp_relation_interface</comment>
        <dropColumn schemaName="apps" tableName="dict_bp_relation_interface" columnName="bp_interface_id" />
        <rollback />
    </changeSet>

    <changeSet id="fin-eug-212" logicalFilePath="path-independent" author="eugene">
        <comment>Add column to table: dict_bp_relation_interface</comment>
        <addColumn schemaName="apps" tableName="dict_bp_relation_interface">
            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" remarks="Идентификатор сеанса" >
                <constraints nullable="true"/>
            </column>

            <column name="bp_num_rel" type="varchar(30)" remarks="Номер делового партнера, с которым есть отношение">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="fin-eug-213" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_contract_interface</comment>
        <createTable tableName="fin_contract_interface" schemaName="apps" remarks="Контракты  - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="bp_type" type="varchar(1)" remarks="Тип делового партнера">
                <constraints nullable="false"/>
            </column>

            <column name="bp_num" type="varchar(30)" remarks="Номер делового партнера-поставщика / заказчика">
                <constraints nullable="false"/>
            </column>

            <column name="cons_bp_num" type="varchar(30)" remarks="Номер делового партнера-выставителя / получателя счета">
                <constraints nullable="true"/>
            </column>

            <column name="contract_num" type="varchar(30)" remarks="Номер договора">
                <constraints nullable="true"/>
            </column>

            <column name="ext_contract_num" type="varchar(30)" remarks="Номер договора с бумажного носителя">
                <constraints nullable="true"/>
            </column>

            <column name="contract_date" type="date" remarks="Дата договора">
                <constraints nullable="false"/>
            </column>

            <column name="start_date" type="date" remarks="Дата начала действия договора">
                <constraints nullable="false"/>
            </column>

            <column name="end_date" type="date" remarks="Дата окончания действия договора">
                <constraints nullable="false"/>
            </column>

            <column name="company_code" type="varchar(4)" remarks="Код балансовой единицы">
                <constraints nullable="false"/>
            </column>

            <column name="company_account_num" type="varchar(30)" remarks="Номер расчетного счета компании">
                <constraints nullable="true"/>
            </column>

            <column name="bp_account_num" type="varchar(30)" remarks="Номер расчетного счета делового партнера">
                <constraints nullable="true"/>
            </column>

            <column name="amount" type="number" remarks="Сумма договора">
                <constraints nullable="false"/>
            </column>

            <column name="currency_code" type="varchar(3)" remarks="Код валюты договора">
                <constraints nullable="false"/>
            </column>

            <column name="payment_code" type="varchar(4)" remarks="Код условий платежа">
                <constraints nullable="true"/>
            </column>

            <column name="channel" type="varchar(4)" remarks="Канал сбыта">
                <constraints nullable="true"/>
            </column>

            <column name="sale_depart_code" type="varchar(4)" remarks="Отдел сбыта">
                <constraints nullable="true"/>
            </column>

            <column name="purchase_group" type="varchar(4)" remarks="Группа закупок">
                <constraints nullable="true"/>
            </column>

            <column name="status" type="varchar2(1)" remarks="Статус обработки записи">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" >
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-214" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_contract_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_contract_interface"
                schemaName="apps"
                tableName="fin_contract_interface"/>
    </changeSet>

    <changeSet id="fin-eug-215" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_contract_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_contract_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-216" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Add comments to the columns fin_contract_interface</comment>
        <sql dbms="postgres, oracle" endDelimiter=";" splitStatements="true" stripComments="true">
            comment on column apps.fin_contract_interface.ws_session_id is 'Идентификатор сеанса';
        </sql>
    </changeSet>

    <changeSet id="fin-eug-217" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: fin_contract_line_interface</comment>
        <createTable tableName="fin_contract_line_interface" schemaName="apps" remarks="Строки контракта - интерфейсная таблица">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="contract_interface_id" type="number" remarks="Идентификатор заголовка">
                <constraints nullable="false"/>
            </column>

            <column name="bp_num" type="varchar(30)" remarks="Номер делового партнера-поставщика / заказчика">
                <constraints nullable="true"/>
            </column>

            <column name="item_num" type="varchar(30)" remarks="Номер основной записи материала">
                <constraints nullable="true"/>
            </column>

            <column name="pos_num" type="number" remarks="Позиция счета-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="pos_name" type="varchar(300)" remarks="Наименование позиции">
                <constraints nullable="false"/>
            </column>

            <column name="unit" type="varchar(100)" remarks="Единица измерения">
                <constraints nullable="true"/>
            </column>

            <column name="quantity" type="number" remarks="Количество">
                <constraints nullable="true"/>
            </column>

            <column name="amount" type="number" remarks="Сумма счета-фактуры">
                <constraints nullable="false"/>
            </column>

            <column name="req_num" type="number" remarks="Номер заявки">
                <constraints nullable="true"/>
            </column>

            <column name="req_pos_num" type="number" remarks="Позиция заявки">
                <constraints nullable="true"/>
            </column>

            <column name="mat_group" type="varchar(30)" remarks="Группа материалов">
                <constraints nullable="true"/>
            </column>

            <column name="cost_center" type="varchar(30)" remarks="Место возникновения затрат">
                <constraints nullable="true"/>
            </column>

            <column name="account" type="varchar(30)" remarks="Счёт">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-218" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: fin_contract_line_interface</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_fin_contract_line_interface"
                schemaName="apps"
                tableName="fin_contract_line_interface"/>
    </changeSet>

    <changeSet id="fin-eug-219" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: fin_contract_line_interface</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="fin_contract_line_interface_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-220" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: fin_contract_line_interface to fin_contract_interface</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_contract_line_interface"
                baseColumnNames="contract_interface_id"
                constraintName="fk_fin_contract_line_interface_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_contract_interface"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-221" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: fin_invoice_line_interface to fin_invoice_interface</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="fin_invoice_line_interface"
                baseColumnNames="invoice_interface_id"
                constraintName="fk_fin_invoice_line_interface_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="fin_invoice_interface"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-222" logicalFilePath="path-independent" author="eugene">
        <comment>Creating table: ws_session_messages</comment>
        <createTable tableName="ws_session_messages" schemaName="apps" remarks="Сообщения от шины">
            <column name="id" type="number" remarks="Идентификатор">
                <constraints nullable="false"/>
            </column>

            <column name="ws_session_id" type="number" remarks="Идентификатор сессии">
                <constraints nullable="false"/>
            </column>

            <column name="object_code" type="varchar2(30)" remarks="Тип объекта">
                <constraints nullable="false"/>
            </column>

            <column name="object_id" type="varchar2(30)" remarks="Идентификатор объекта">
                <constraints nullable="true"/>
            </column>

            <column name="sap_id" type="varchar2(30)" remarks="Идентификатор объекта в ERP">
                <constraints nullable="true"/>
            </column>

            <column name="system_code" type="varchar2(30)" remarks="Код системы">
                <constraints nullable="true"/>
            </column>

            <column name="msg_num" type="varchar2(30)" remarks="№ сообщения">
                <constraints nullable="true"/>
            </column>

            <column name="msg_type" type="varchar2(1)" remarks="Тип сообщения">
                <constraints nullable="true"/>
            </column>

            <column name="msg" type="varchar2(1000)" remarks="Текст сообщения">
                <constraints nullable="true"/>
            </column>

            <column name="create_date" type="TIMESTAMP" remarks="Дата создания">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_date" type="TIMESTAMP" remarks="Дата изменения">
                <constraints nullable="true"/>
            </column>

            <column name="create_by" type="number" remarks="Автор">
                <constraints nullable="true"/>
            </column>

            <column name="last_update_by" type="number" remarks="Автор изменения">
                <constraints nullable="true"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="fin-eug-223" logicalFilePath="path-independent" author="eugene">
        <comment>Creating primary key for table: ws_session_messages</comment>
        <addPrimaryKey
                columnNames="id"
                constraintName="pk_ws_session_messages"
                schemaName="apps"
                tableName="ws_session_messages"/>
    </changeSet>

    <changeSet id="fin-eug-224" logicalFilePath="path-independent" author="eugene">
        <comment>Creating sequence for table: ws_session_messages</comment>
        <createSequence
                incrementBy="1"
                schemaName="apps"
                sequenceName="ws_session_messages_s"
                startValue="1"/>
    </changeSet>

    <changeSet id="fin-eug-225" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Creating foreign constraint: ws_session_messages to ws_sessions</comment>
        <addForeignKeyConstraint
                baseTableSchemaName="apps"
                baseTableName="ws_session_messages"
                baseColumnNames="ws_session_id"
                constraintName="fk_ws_session_messages_1"
                deferrable="true"
                onDelete="RESTRICT"
                onUpdate="RESTRICT"
                referencedTableSchemaName="apps"
                referencedTableName="ws_sessions"
                referencedColumnNames="id"
        />
    </changeSet>

    <changeSet id="fin-eug-226" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Modify column data type for table: fin_req_line_interface</comment>
        <modifyDataType schemaName="apps" tableName="fin_req_line_interface" columnName="item_num" newDataType="varchar(30)" />
    </changeSet>

    <changeSet id="fin-eug-227" logicalFilePath="path-independent" author="eugene" context="dev">
        <comment>Drop not null constraint for table: fin_invoice_interface</comment>
        <dropNotNullConstraint schemaName="apps" tableName="fin_invoice_interface" columnName="doc_num" />
    </changeSet>

    <changeSet id="fin-eug-228" logicalFilePath="path-independent" author="eugene">
        <addColumn schemaName="apps" tableName="fin_contract_line_interface">
            <column name="price" type="number" remarks="Цена за единицу" >
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="fin-eug-229" logicalFilePath="path-independent" author="eugene">
        <addColumn schemaName="apps" tableName="fin_contract_interface">
            <column name="contract_type" type="varchar2(10)" remarks="Тип контракта">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet id="fin-eug-230" logicalFilePath="path-independent" author="eugene">
        <addColumn schemaName="apps" tableName="fin_invoice_line_interface">
            <column name="discount" type="number" remarks="Сумма скидки" >
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>
</databaseChangeLog>
